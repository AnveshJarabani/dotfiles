# List of plugins
set-environment -g TMUX_PLUGIN_MANAGER_PATH "$HOME/.tmux/plugins"
set-environment -g TMUX_POWERLINE_THEME aj

# Update GPG_TTY for passphrase prompts (pass, git signing)
set-option -g update-environment "GPG_TTY"
set-environment -g GPG_TTY "$TTY"
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'laktak/extrakto'
set -g @plugin 'tmux-plugins/tmux-copycat'
# set -g @plugin 'jaclu/tmux-menus'
set -g @plugin 'erikw/tmux-powerline'
set -g @plugin 'thepante/tmux-git-autofetch'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'nhdaly/tmux-better-mouse-mode'
set -g @plugin 'omerxx/tmux-sessionx'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-jump'
bind-key j run-shell "~/.tmux/plugins/tmux-jump/scripts/tmux-jump.sh"
unbind C-b
set-option -g prefix C-n
bind C-n send-prefix
#enter copy mode with Ctrl-/
bind -n C-_ copy-mode
#mouse support
set -g mouse on
set-window-option -g mode-keys vi
set-window-option -g xterm-keys on
set -g status-interval 1
set-option -g history-limit 2500000
set-option -g detach-on-destroy off
set -g @sessionx-prefix off
set -g @sessionx-bind 'C-o'
set -g @sessionx-filter-current 'false'
set -g @sessionx-window-mode 'off'
# Switch sessions with Shift+Alt+i/k (like windows but for sessions)
bind -n M-I switch-client -p
bind -n M-K switch-client -n
# Delete current session and switch to next available
bind -n M-D run-shell 'tmux switch-client -n \; kill-session -t "#S"'
bind -n C-k clear-history
set -g @plugin 'tmux-plugins/tpm'
set -g @scroll-down-exit-copy-mode "on"
bind-key -T copy-mode-vi v send-keys -X begin-selection
run-shell '~/.tmux/plugins/tpm/tpm'
set -g @sessionx-window-height '98%'
set -g @sessionx-window-width '90%'
set-option -g status-left-length 250
set -g window-status-format ""
set -g window-status-current-format ""
set-option -g status-position top
bind -T copy-mode-vi Escape send-keys -X cancel
unbind -n C-l
set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM

# 1. Enter copy mode (e.g., with your configured key, C-/).
# 2. Make a selection (e.g., with `v` in vi mode).
# 3. Press `p` to copy and paste the selection into the terminal.
# Better vi-mode bindings in copy mode
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind -T copy-mode-vi Y send-keys -X copy-line

# Visual mode improvements
bind -T copy-mode-vi V send-keys -X select-line
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind -T copy-mode-vi u send-keys -X halfpage-up
bind -T copy-mode-vi d send-keys -X halfpage-down

# Better navigation
bind -T copy-mode-vi H send-keys -X start-of-line
bind -T copy-mode-vi L send-keys -X end-of-line
bind -T copy-mode-vi w send-keys -X next-word
bind -T copy-mode-vi b send-keys -X previous-word
bind -T copy-mode-vi e send-keys -X next-word-end

# Search in copy mode
bind -T copy-mode-vi / send-keys -X search-forward
bind -T copy-mode-vi ? send-keys -X search-backward
bind -T copy-mode-vi n send-keys -X search-again
bind -T copy-mode-vi N send-keys -X search-reverse
