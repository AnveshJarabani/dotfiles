#!/usr/bin/env bash
# Quick git commit with optional message (requires personal email from pass)

git_email=$(git config user.email)
required_email="$(pass git/personal/email)"

if [ "$git_email" != "$required_email" ]; then
  echo "Current git email is '$git_email'. Please switch to '$required_email' to use this function."
  exit 1
fi

git add .

if [ -z "$1" ]; then
  commit_message="updates"
else
  commit_message="$1"
fi

git commit -m "$commit_message"
git push
